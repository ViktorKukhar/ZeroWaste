<div class="container home">
  <div class="d-flex justify-content-between align-items-end">
    <div class="mb-2" style="display: inline-block;">
      <h1 class="text-body d-inline"><%= t('.main_header') %></h1>
      <h3 class="d-inline"><%= link_to icon('fa-solid', 'download'), account_users_path(format: "csv") %></h3>
    </div>

    <%= search_form_for(@q, url: [:account, :users], method: :get, class: "form-inline") do |f| %>
      <div class="d-flex">
        <%= f.search_field :email_or_first_name_or_last_name_cont, placeholder: t(".search_placeholder"), class: "form-input me-2" %>
        <%= f.button t(".search_button"), class: "btn btn-blue px-4" %>
      </div>
    <% end %>
  </div>
  </br>
  <table aria-label="users table" class="table admin-table">
    <thead>
      <tr>
        <th scope="col"><%= sort_link(@q, :email, t('.table.email_col'), default_order: :desc) %></th>
        <th scope="col"><%= sort_link(@q, :first_name, t('.table.first_name'), default_order: :desc) %></th>
        <th scope="col"><%= sort_link(@q, :last_name, t('.table.last_name'), default_order: :desc) %></th>
        <th scope="col"><%= sort_link(@q, :updated_at, t('.table.last_visit_col'), default_order: :desc) %></th>
        <th scope="col" class="text-center"><%= t('.table.show') %></th>
        <th scope="col" class="text-center"><%= t('.table.edit') %></th>
        <th scope="col" class="text-center"><%= t('.table.ban') %></th>
        <th scope="col" class="text-center"><%= t('.table.delete') %></th>
      </tr>
    </thead>
    <tbody class="admin-table-links">
      <% @users.each do |user| %>
        <tr id="user-info-<%= user.id %>">
          <td><%= user.email %></td>
          <td><%= user.first_name %></td>
          <td><%= user.last_name %></td>
          <td><%= user.last_sign_in_at %></td>
          <td class="text-center"><%= link_to icon('fa-solid', 'eye'), account_user_path(id: user.id) %></td>
          <td class="text-center"><%= link_to icon('fa-solid', 'edit'), edit_account_user_path(id: user.id) %></td>
          <td class="text-center">
            <%= link_to icon('fa-solid', user.blocked? ? 'lock' : 'lock-open'),
                        account_user_path(id: user, user: { blocked: user.blocked? ? false : true }),
                        onclick: "alert('Are you sure?')", method: :patch %>
          </td>
          <td class="text-center">
            <%= link_to account_user_path(id: user), method: :delete,
                        data: { confirm: t('.confirm_delete') } do %>
              <i class="mx-2 fa fa-trash"></i>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
